<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:OutOfTheBox.ViewModels"
             xmlns:model="clr-namespace:OutOfTheBox.Models"
             x:Class="OutOfTheBox.Pages.TripsPage"
             Title="Trips"
             x:DataType="vm:TripViewModel"
             Shell.BackgroundColor="#D06B3E"
             Shell.TitleColor="White">

    <ContentPage.ToolbarItems>
        <ToolbarItem IconImageSource="plus.png" Command="{Binding AddTripCommand}"/>
    </ContentPage.ToolbarItems>
        
        
         <CollectionView Grid.Row="1" 
                ItemsSource="{Binding Trips}" 
                Margin="20,24"
                SelectionMode="None">

        <CollectionView.EmptyView>
            <VerticalStackLayout Spacing="16" VerticalOptions="Center" Padding="40">
                <Label Text="ðŸ“" FontSize="64" HorizontalOptions="Center" Opacity="0.3"/>
                <Label Text="Aucun voyage enregistrÃ©" 
                   HorizontalOptions="Center" 
                   FontFamily="PoppinsBold"
                   FontSize="18" 
                   TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray400}}"/>
                <Label Text="Commencez par ajouter votre premier voyage !" 
                   HorizontalOptions="Center" 
                   FontSize="14" 
                   TextColor="{AppThemeBinding Light={StaticResource Gray500}, Dark={StaticResource Gray500}}"
                   HorizontalTextAlignment="Center"/>
            </VerticalStackLayout>
        </CollectionView.EmptyView>
        <CollectionView.ItemsLayout>
            <GridItemsLayout 
                         HorizontalItemSpacing="16" 
                         VerticalItemSpacing="16" 
                         Orientation="Vertical" />
        </CollectionView.ItemsLayout>
             
             
             
        <CollectionView.ItemTemplate>
            <DataTemplate x:DataType="model:TripModel">
                <Border StrokeShape="RoundRectangle 20" Padding="10" Margin="5"
                    StrokeThickness="0" 
                    BackgroundColor="{AppThemeBinding Light=White, Dark={StaticResource SubtleDark}}
                    ">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,4" Radius="16" Opacity="0.1" />
                    </Border.Shadow>
                    <Grid ColumnDefinitions="125, 1, *" ColumnSpacing="10">
                        <Border Grid.Row="0" StrokeShape="RoundRectangle 16,16,16,16" StrokeThickness="0">
                            <Image Source="{Binding Image}" Aspect="AspectFill" WidthRequest="120" />
                        </Border>
                        <BoxView Grid.Column="1"
                                 Opacity="0.2"
                                 WidthRequest="2"  
                                 BackgroundColor="LightGray"/>
                        <Grid Grid.Column="2" RowDefinitions="Auto, * , Auto">
                            <Grid Grid.Row="0" ColumnDefinitions="* , Auto" >
                                <Label Grid.Column="0"
                                       FontAttributes="Bold"
                                       FontSize="14"
                                       Text="{Binding Title}"/>
                                <Border Grid.Column="1"
                                        HeightRequest="25"
                                        StrokeShape="RoundRectangle 8"
                                        BackgroundColor="#D06B3E" 
                                        Padding="10, 2"
                                        Margin="1"
                                        >
                                    <Label Text="Planifier"
                                           TextColor="White"
                                           />

                                </Border>
                            </Grid>
                            <Label Grid.Row="1" Padding="0" Margin="0"
                                   Text="{Binding Location}"
                                   VerticalOptions="Center"/>
                            <Label Grid.Row="2"
                                   Text="{Binding date}"  />
                        </Grid>
                    </Grid>
                </Border>
            </DataTemplate>
        </CollectionView.ItemTemplate>
    </CollectionView>

   


</ContentPage>