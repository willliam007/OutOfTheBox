<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:controls="clr-namespace:OutOfTheBox.Controls"
             x:Class="OutOfTheBox.Pages.RegisterPage"
             xmlns:vm="clr-namespace:OutOfTheBox.ViewModels"
             x:DataType="vm:RegisterViewModel"
             Shell.NavBarIsVisible="False">

    <ScrollView>
        <Grid RowDefinitions="240, Auto, *" RowSpacing="0">

            <!-- En-tÃªte avec image -->
            <Grid Grid.Row="0">
                <Image Source="chute.png" Aspect="AspectFill" />
                <BoxView Background="{StaticResource OverlayGradient}" />
                <Label Text="Rejoignez-nous" FontSize="40"
                       Style="{StaticResource appName}" 
                       VerticalOptions="Center" />
            </Grid>

            <!-- Message d'accueil -->
            <Label Grid.Row="1" 
                   FontFamily="PoppinsRegular"
                   FontSize="18" 
                   HorizontalOptions="Center" 
                   Text="CrÃ©ez votre compte ðŸŒ"
                   Margin="0,30,0,20"/>

            <!-- Formulaire -->
            <VerticalStackLayout Grid.Row="2" Spacing="20" Padding="30,0,30,40">
                
                <VerticalStackLayout Spacing="8">
                    <Label Text="Nom d'utilisateur" Style="{StaticResource FormLabel}"/>
                    <Border Style="{StaticResource EntryWrapper}">
                        <Grid ColumnDefinitions="Auto, *" VerticalOptions="Center" HeightRequest="50">
                            <Image Source="user.png" Style="{StaticResource EntryIcon}" />
                            <controls:NoUnderlineEntry Grid.Column="1" Margin="04,06,00,00"
                                                       Placeholder="Votre nom" 
                                                       Text="{Binding Username}" 
                                                       Style="{StaticResource ThemedNoUnderlineEntry}" />
                        </Grid>
                    </Border>
                </VerticalStackLayout>

                <VerticalStackLayout Spacing="8">
                    <Label Text="Adresse e-mail" Style="{StaticResource FormLabel}"/>
                    <Border Style="{StaticResource EntryWrapper}">
                        <Grid ColumnDefinitions="Auto, *" VerticalOptions="Center" HeightRequest="50">
                            <Image Source="mail.png" Style="{StaticResource EntryIcon}" />
                            <controls:NoUnderlineEntry Grid.Column="1" Margin="04,06,00,00"
                                                       Placeholder="nom@exemple.com" 
                                                       Text="{Binding Email}" 
                                                       Keyboard="Email" 
                                                       Style="{StaticResource ThemedNoUnderlineEntry}" />
                        </Grid>
                    </Border>
                </VerticalStackLayout>

                <VerticalStackLayout Spacing="8">
                    <Label Text="Mot de passe" Style="{StaticResource FormLabel}"/>
                    <Border Style="{StaticResource EntryWrapper}">
                        <Grid ColumnDefinitions="Auto, *, Auto" VerticalOptions="Center" HeightRequest="50">
                            <Image Source="password.png" Style="{StaticResource EntryIcon}" />
                            <controls:NoUnderlineEntry Grid.Column="1" Margin="04,06,00,00"
                               Placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" 
                               Text="{Binding Password}" 
                               IsPassword="{Binding IsPassword}" 
                               Style="{StaticResource ThemedNoUnderlineEntry}" />
                            <ImageButton Grid.Column="2" 
                               Source="{Binding PasswordIcon}" 
                               Command="{Binding TogglePasswordVisibilityCommand}" 
                               Style="{StaticResource EyeIcon}" />
                        </Grid>
                    </Border>
                    <Label Text="Au moins 8 caractÃ¨res" 
                           FontSize="12" 
                           TextColor="{AppThemeBinding Light={StaticResource Gray500}, Dark={StaticResource Gray400}}"
                           Margin="4,4,0,0"/>
                    
                </VerticalStackLayout>

                <Button Text="CrÃ©er mon compte" 
                        Margin="0,12,0,0" />

                <Label HorizontalOptions="Center" Margin="0,16,0,0">
                    <Label.FormattedText>
                        <FormattedString>
                            <Span Text="DÃ©jÃ  un compte ? " FontFamily="PoppinsRegular"/>
                            <Span Text="Connectez-vous" 
                                  TextColor="{StaticResource Primary}" 
                                  FontFamily="PoppinsBold"
                                  TextDecorations="Underline">
                                <Span.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding NavigationToLoginPageCommand}"/>
                                </Span.GestureRecognizers>
                            </Span>
                        </FormattedString>
                    </Label.FormattedText>
                </Label>
            </VerticalStackLayout>
        </Grid>
    </ScrollView>
</ContentPage>